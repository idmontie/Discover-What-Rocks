<template name="meetups-add-form">
  <form id="meetups_add_form">
    <div class="row">
      <div class="large-12 columns">
        <label class="{{#if date_is_not_valid}}error{{/if}}">
          When To Meet
          <input type="datetime" name="date_to_meet" />
        </label>
        {{#if date_is_not_valid}}
          <small class="error">{{{date_error_message}}}</small>
        {{/if}}
      </div>

      <div class="large-12 columns">
        <label class="{{#if map_center_is_not_valid}}error{{/if}}">
          General Area to Meet
          <div class="row collapse">
            <div class="small-10 columns">
              <input type="text" name="map_center" id="map_center">
            </div>
            <div class="small-2 columns">
              <a href="#" class="button postfix" id="use_current_location"  {{geolocation_enabled}} >Use My Current Location</a>
            </div>
          </div>
        </label>
        {{#if map_center_is_not_valid}}
          <small class="error">{{{map_center_error_message}}}</small>
        {{/if}}
      </div>
    </div>

    <div id="map-canvas" style="width:100%;height:350px;"></div>
  </form>
  <script>
    // TODO
    var Coords = {
      latitude: 33.388855899999996, 
      longitude: -111.9638609
    }

    /**
     * @see http://xdsoft.net/jqplugins/datetimepicker/
     */
    jQuery( function ( $ ) {
      $( document ).ready( function () {
        $( 'input[name="date_to_meet"]' ).datetimepicker();

          var map = new google.maps.Map( document.getElementById( 'map-canvas' ), {
            center: new google.maps.LatLng( Coords.latitude, Coords.longitude ),
            zoom: 13
          } );
      } );
    });

    function current_position_callback( position ) {
      var location = position.coords.latitude + ', ' + position.coords.longitude;

      $( '#map_center' ).val( location );
    }
  </script>
</template>

<template name="meetups-update-form">
  <!-- TODO -->
</template>